name: Generate Pacman Animation (Dark/Light Mode)

on:
  schedule:
    # Eksekusi setiap 12 jam
    - cron: "0 */12 * * *"
  workflow_dispatch:
  push:
    branches:
      - main

jobs:
  generate:
    # PENTING: Memberikan izin tulis agar action bisa push file output
    permissions:
      contents: write 
    runs-on: ubuntu-latest
    timeout-minutes: 5

    steps:
      - uses: actions/checkout@v3

      # 1. GENERATE UNTUK LIGHT MODE ‚òÄÔ∏è (Menggunakan Platane/snk untuk fleksibilitas warna)
      - name: Generate Light Mode Image
        uses: Platane/snk@v3
        with:
          github_user_name: Bobbb00 # <-- GANTI DENGAN USERNAME ANDA!
          # Output Light Mode
          outputs: dist/pacman-contribution-graph-light.svg
          # Konfigurasi warna untuk Light Mode
          colors: |
            snake: "#0969da" # Biru
            dots: "#ff9500" # Kuning Pac-Man
            background: "#ffffff00" # Transparan
            grid: "#ebedf0" # Abu-abu terang

      # 2. GENERATE UNTUK DARK MODE üåô
      - name: Generate Dark Mode Image
        uses: Platane/snk@v3
        with:
          github_user_name: Bobbb00 # <-- GANTI DENGAN USERNAME ANDA!
          # Output Dark Mode
          outputs: dist/pacman-contribution-graph-dark.svg
          # Konfigurasi warna untuk Dark Mode
          colors: |
            snake: "#2f81f7" # Biru terang
            dots: "#ffd700" # Kuning cerah
            background: "#ffffff00" # Transparan
            grid: "#21262d" # Abu-abu gelap GitHub Dark Mode

      # 3. Buat direktori 'dist' dan pastikan file SVG ada di sana
      # (Tidak perlu mkdir/mv lagi karena Platane/snk langsung output ke dist/)

      # 4. Push file SVG ke branch 'output'
      - name: Push new images to the output branch
        uses: crazy-max/ghaction-github-pages@v3.1.0
        with:
          target_branch: output # Branch yang akan menyimpan gambar
          build_dir: dist # Direktori tempat gambar berada
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
